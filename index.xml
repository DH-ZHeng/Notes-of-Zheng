<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>Notes</title>
        <link>https://dh-zheng.github.io/Notes.github.io/</link>
        <description>What I have learned in SUSTech</description>
        <generator>Hugo -- gohugo.io</generator><language>en</language><managingEditor>13129114635@163.com (ZHengDH)</managingEditor>
            <webMaster>13129114635@163.com (ZHengDH)</webMaster><copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright>
            <atom:link href="https://dh-zheng.github.io/Notes.github.io/index.xml" rel="self" type="application/rss+xml" />
        <item>
    <title>Black-Scholes æ¨å¯¼</title>
    <link>https://dh-zheng.github.io/Notes.github.io/posts/finance/black-scholes/</link>
    <pubDate>Mon, 01 Jan 0001 00:00:00 &#43;0000</pubDate>
    <author>ZHengDH</author>
    <guid>https://dh-zheng.github.io/Notes.github.io/posts/finance/black-scholes/</guid>
    <description><![CDATA[<h1 id="æ­£æ€åˆ†å¸ƒä¸å¯¹æ•°æ­£æ€åˆ†å¸ƒ">æ­£æ€åˆ†å¸ƒä¸å¯¹æ•°æ­£æ€åˆ†å¸ƒ</h1>
<h2 id="æ­£æ€åˆ†å¸ƒ">æ­£æ€åˆ†å¸ƒ</h2>
<h3 id="æ¦‚ç‡å¯†åº¦å‡½æ•°">æ¦‚ç‡å¯†åº¦å‡½æ•°</h3>
<p>$$
f(x)=\frac{1}{\sqrt {2\pi \sigma^2}}e^{-\frac{(x-\mu)^2}{2\sigma^2}}
$$</p>
<h3 id="æ ‡å‡†åŒ–">æ ‡å‡†åŒ–</h3>
<p>$$
t=\frac{x-\mu}{\sigma}\
f(t)=\frac{1}{\sqrt {2\pi}}e^{-\frac{t^2}{2}dt}
$$</p>
<h3 id="æ ‡å‡†æ­£æ€åˆ†å¸ƒéšæœºå˜é‡ç´¯è®¡åˆ†å¸ƒå‡½æ•°">æ ‡å‡†æ­£æ€åˆ†å¸ƒéšæœºå˜é‡ç´¯è®¡åˆ†å¸ƒå‡½æ•°</h3>
<p>$$
N(U)=\int_{t=-\infty}^U {\frac{1}{\sqrt{2\pi}}e^{-\frac{t^2}{2}dt}}
$$</p>
<h2 id="å¯¹æ•°æ­£æ€åˆ†å¸ƒ">å¯¹æ•°æ­£æ€åˆ†å¸ƒ</h2>
<h3 id="èµ„äº§ä»·æ ¼çš„å¯¹æ•°å˜åŒ–">èµ„äº§ä»·æ ¼çš„å¯¹æ•°å˜åŒ–</h3>
<ul>
<li>å¦‚æœæŠŠèµ„äº§ä»·æ ¼å˜åŒ– ($S_T-S_0$) è®¾å®šä¸ºæ­£æ€åˆ†å¸ƒçš„è¯ï¼Œèµ„äº§ä»·æ ¼å¯èƒ½ä¸ºè´Ÿæ•°</li>
<li>é€šå¸¸å°†èµ„äº§ä»·æ ¼çš„å¯¹æ•°å˜åŒ– ($lnS_T~-lnS_0$) è®¾å®šä¸ºæ­£æ€åˆ†å¸ƒ
$$
lnS_T-lnS_0=x\backsim\phi(\mu, \sigma^2)
$$
å› æ­¤
$$
S_T = S_0e^x
$$
ç§°$S_T$æœä»å¯¹æ•°æ­£æ€åˆ†å¸ƒï¼ˆå–å¯¹æ•°åæœä»æ­£æ€åˆ†å¸ƒ)</li>
</ul>
<h3 id="å¯¹æ•°æ­£æ€åˆ†å¸ƒçš„æœŸæœ›">å¯¹æ•°æ­£æ€åˆ†å¸ƒçš„æœŸæœ›</h3>
<ul>
<li>
<p>éšæœºå˜é‡e^x^æœä»å¯¹æ•°æ­£æ€åˆ†å¸ƒï¼Œå…¶æœŸæœ›ä¸ºï¼š
$$
E(e^x)=\int_{-\infty}^{\infty}{e^xf(x)dx}= \int_{-\infty}^{\infty}{e^x\frac{1}{\sqrt{2\pi\sigma^2}}e^{-\frac{(x-\mu)^2}{2\sigma^2}}dx}
$$</p>
</li>
<li>
<p>æ ‡å‡†åŒ–ï¼Œå®šä¹‰$t=\frac{x-u}{\sigma}$ï¼Œåˆ™tæ˜¯ä¸€ä¸ªæœä»æ ‡å‡†æ­£æ€åˆ†å¸ƒçš„éšæœºå˜é‡
$$
x=\sigma t+\mu, dx=\sigma dt\
E(e^x)=\int_{-\infty}^{\infty}{e^x \frac{1}{\sqrt{2\pi\sigma^2}}e^{-\frac{(x-\mu)^2}{2\sigma^2}}dx}=e^{\mu+\frac{1}{2}\sigma^2}
$$</p>
</li>
</ul>
<h1 id="è¿ç»­æ—¶é—´å¸ƒæœ—è¿åŠ¨">è¿ç»­æ—¶é—´å¸ƒæœ—è¿åŠ¨</h1>
<h2 id="éšæœºæ¸¸èµ°">éšæœºæ¸¸èµ°</h2>
<ul>
<li>
<p>$$
z_1-z_0=\epsilon_0\
\cdot\
\cdot\
z_{t+1}-z_t=\epsilon_t\
\cdot \
\cdot 
$$</p>
</li>
<li></li>
</ul>
<p>$$
z_t-z_0=\sum\limits_{j=1}^{t} \epsilon_{t-j}\
z_{t+\Delta}-z_t \backsim\phi(0, \Delta),  \forall \Delta&gt;0
$$</p>
<ul>
<li>ç”±äº$\epsilon_t$ç‹¬ç«‹åŒåˆ†å¸ƒ
$$
E(z_t-z_0)=E(\sum\limits_{j=1}^{t} \varepsilon_{t-j})=\sum\limits_{j=1}^{t} E (\varepsilon_{t-j})=0\
var(z_t-z_0)=E (\sum\limits_{j=1}^{t} \varepsilon_{t-j})^2=\sum\limits_{j=1}^{t} E(\varepsilon_{t-j})^2=t \times 1=t
$$</li>
</ul>
<h2 id="éšæœºç§¯åˆ†">éšæœºç§¯åˆ†</h2>
<ul>
<li>
<p>$$
E(dz_t)=0\
var_t(dz_t)=E_t[dz_t-E_t(dz_t)]^2=E_t(dz_t)^2=dt\
dz_t\backsim \sqrt{dt}
$$
$dz_t$çš„é‡çº§ä¸$\sqrt{dt}$çš„é‡çº§ä¸€æ ·</p>
</li>
<li>
<p>å¹¿ä¹‰å¸ƒæœ—è¿åŠ¨
$$
dx_t=\mu dt+\sigma dz_t
$$
$dx_t$æ˜¯æ¯æ—¶åˆ»ç²’å­çš„ä½ç½®å˜åŒ–ï¼Œ$udt$æ˜¯æ¯æ—¶åˆ»ç²’å­è¿åŠ¨çš„è¶‹åŠ¿é¡¹ï¼Œ$\sigma$ æ˜¯ç²’å­ä½ç½®å˜åŒ–çš„æ ‡å‡†å·®
$$
E_t(dx_t)=E_t(\mu dt+\sigma dz_t)=\mu dt\
\begin{aligned}
var_t(dx_t)&amp;=E_t[dx_t-E_t(dx_t)]^2\
&amp;=E_t(\mu dt+\sigma dz_t-\mu dt)^2\
&amp;=\sigma^2E_t(dz_t)^2\
&amp;=\sigma^2dt<br>
\end{aligned}
$$</p>
</li>
<li>
<p>ä¼Šè—¤å¼•ç†
ååº”å¦‚æœæ ‡çš„èµ„äº§ä»·æ ¼åšå¸ƒæœ—è¿åŠ¨ï¼Œè¡ç”Ÿå“çš„ä»·æ ¼æ˜¯å¦‚ä½•è¿åŠ¨çš„</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">$dz_t$</th>
<th style="text-align:center">$dt$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$dz_t$</td>
<td style="text-align:center">$dt$</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">$dt$</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
<p>å¦‚æœ $x_t$ æœä» $dx_t=\mu dt+\sigma dz_t$ çš„è¿‡ç¨‹ï¼Œé‚£ä¹ˆ$y_t=f(x_t)$ä¼šæœä»ä»€ä¹ˆè¿‡ç¨‹ã€‚
$$
\begin{aligned}
dy_t&amp;=\frac{\partial f}{\partial x}dx_t+\frac{1}{2}\frac{\partial^2f}{\partial x^2}dx^2\
&amp;=\frac{\partial f}{\partial x}(\mu dt+\sigma dz_t)+\frac{1}{2} \frac{\partial^2 f}{\partial x^2}(\mu dt+ \sigma dz_t)^2\
&amp;=(\frac{\partial f}{\partial x} \mu+\frac{1}{2} \frac{\partial^2f}{\partial x^2} \sigma^2)dt+ \frac{\partial f}{\partial x} \sigma dz_t
\end{aligned}
$$
$y_t$ä½œä¸º$x_t$çš„å‡½æ•°ï¼Œä¹Ÿåœ¨åšå¸ƒæœ—è¿åŠ¨ï¼Œåªä¸è¿‡åœ¨$y_t$çš„æ¼‚ç§»é¡¹ä¸­ï¼Œè¿˜åŒ…å«äº†$x_t$çš„æ‰©æ•£é¡¹</p>
</li>
<li>
<p>éšæœºç§¯åˆ†
$$
\int_{t=0}^{T}{dz_t}=\lim\limits_{n \to 0} [(z_{\Delta}-z_0)+(z_{2\Delta}-z_{\Delta})+\cdots+(z_T-z_{T-\Delta})]=z_T-z_0 \backsim \phi(0, T)\
\int_{t=0}^T=dx_t=\mu \int_{t=0}^T dt+ \sigma \int_{t=0}^T dz_t\
x_T-x_0=\mu T+\sigma \int_{t=0}^T dz_t\
E_0(x_T-x_0)=\mu T\
var(x_T-x_0)=\sigma^2 T
$$</p>
</li>
<li>
<p>å‡ ä½•å¸ƒæœ—è¿åŠ¨
$$
dS_t=\mu S_t dt+ \sigma S_t dz_t\
$$
ä¹Ÿå³ï¼š
$$
\frac{dS_t}{S_t}=\mu dt+\sigma dz_t
$$</p>
</li>
</ul>
<h2 id="bså…¬å¼çš„åå¾®åˆ†æ–¹ç¨‹æ¨å¯¼">BSå…¬å¼çš„åå¾®åˆ†æ–¹ç¨‹æ¨å¯¼</h2>
<ul>
<li>
<p>å‡è®¾å¸‚åœºä¸­å­˜åœ¨è‚¡ç¥¨å’Œæ— é£é™©å€ºåˆ¸ä¸¤ç§èµ„äº§ï¼Œå…¶ä»·æ ¼åˆ†åˆ«ä¸º$S_t$ä¸$B_t$ã€‚ä¸¤ç§èµ„äº§ä»·æ ¼çš„è¿åŠ¨æ–¹ç¨‹ä¸º
$$
dS_t=\mu S_tdt+\sigma S_tdz_t\
dB_t=rBdt
$$
æ„å»ºæ— é£é™©ç»„åˆï¼š
$$
V(t, S_t)=-f(t,S_t)+ \frac{\partial f}{\partial S}S_t
$$
åŒ…å«1å•ä½è¡ç”Ÿå“çš„ç©ºå¤´ï¼Œä»¥åŠ$\frac{\partial f}{\partial S}S_t$è‚¡çš„è‚¡ç¥¨å¤šå¤´ã€‚</p>
</li>
<li>
<p>ç”±ä¼Šè—¤å¼•ç†å¯ä»¥æ±‚å‡ºç»„åˆä»·å€¼çš„å¾®åˆ†ä¸º
$$
\begin{aligned}
dV(t,S_t)&amp;=-df(t,S_t)+\frac{\partial f}{\partial S}dS_t\
&amp;=-(\frac{\partial f}{\partial t}dt+\frac{\partial f}{\partial S}dS_t+\frac{1}{2}\frac{\partial^2 f}{\partial S^2}dS^2_t)+\frac{\partial f}{\partial S}dS_t\
&amp;=-\frac{\partial f}{\partial t}dt-\frac{1}{2} \frac{\partial^2 f}{\partial S^2}(\mu S_t dt+\sigma S_t dz_t)^2\
&amp;=-\frac{\partial f}{\partial t}dt-\frac{1}{2}\frac{\partial^2 f}{\partial S^2}\sigma^2 S^2_t(dz_t)^2\
&amp;=-(\frac{\partial f}{\partial t}+\frac{1}{2}\frac{\partial^2 f}{\partial S^2} \sigma^2 S^2_t)dt
\end{aligned}
$$</p>
<p>ç”±äºç»„åˆæ— é£é™©ï¼Œæ‰€ä»¥ç»„åˆçš„ä»·å€¼ç†åº”æŒ‰ç…§æ— é£é™©åˆ©ç‡rå¢é•¿ï¼Œå³ï¼š
$$
dV(t,S_t)=rV(t,S_t)dt
$$
äºæ˜¯æœ‰ï¼Œ
$$
-(\frac{\partial f}{\partial t}+\frac{1}{2} \frac{\partial^2 f}{\partial S^2} \sigma^2S^2_t)dt=rV(t,S_t)dt
$$
å°†$V(t,S_t)$å¸¦å…¥ï¼Œæœ‰
$$
-(\frac{\partial f}{\partial t}+\frac{1}{2} \frac{\partial^2 f}{\partial S^2} \sigma^2S^2_t)dt=r[-f(t,S_t)+ \frac{\partial f}{\partial S}S_t]dt
$$
ä¸Šå¼ä¸¤è¾¹$d_t$å‰çš„ç³»æ•°ä¸€å®šè¦ç›¸ç­‰ï¼Œæ‰€ä»¥æœ‰ï¼Œ
$$
\frac{\partial f}{\partial t}+rS_t \frac{\partial f}{\partial S}+\frac{1}{2}\sigma^2S^2_t \frac{\partial^2 f}{\partial S^2}=rf
$$
ç»“åˆè¾¹ç•Œæ¡ä»¶å¯ä»¥è§£å‡ºï¼Œæ¯”å¦‚æ¬§å¼ä¹°å…¥æœŸæƒçš„è¾¹ç•Œæ¡ä»¶æ˜¯$f(T, S_T)=max(S_T-K,0)$</p>
</li>
</ul>
<h2 id="é…æ–¹æ³•æ¨å¯¼">é…æ–¹æ³•æ¨å¯¼</h2>
<ul>
<li>
<p>åˆ©ç”¨éšæœºç§¯åˆ†ç›´æ¥æŠŠä»·æ ¼çš„å…¬å¼æ¥å‡ºæ¥ã€‚</p>
</li>
<li>
<p>å¯¹äºæ— é£é™©å€ºåˆ¸å®¶çš„å¯¹æ•°$ln(B_t)$çš„å¾®åˆ†ï¼š
$$
d(\ln B_t)=\frac{1}{B_t}dB_t=\frac{1}{B_t}B_t dt=rdt
$$
ä¸Šå¼å·¦å³ä¸¤è¾¹åŒæ—¶æ±‚ç§¯åˆ†å¯å¾—
$$
\int_{t=0}^T {d(\ln B_t)}=\int_{t=0}^T {rdt}
$$
è¿™ä¾¿æ˜¯æ— é£é™©å€ºåˆ¸åœ¨Tæ—¶åˆ»ä»·æ ¼çš„å…¬å¼
æ¥ä¸‹æ¥å†åˆ©ç”¨ä¼Šè—¤å®šç†æ¥æ±‚è§£å‡ºè‚¡ç¥¨ä»·æ ¼çš„å…¬å¼
$$
\begin{aligned}
d(\ln S_t)&amp;=\frac{1}{S_t}dS_t -\frac{1}{2}\frac{1}{S^2_t} \
&amp;=\mu dt+\sigma dz_t-\frac{1}{2S^2_t}(\mu S_t dt+\sigma S_tdz_t)^2\
&amp;=\mu dt+\sigma dz_t-\frac{1}{2}\sigma^2 dt\
&amp;=(\mu-\frac{1}{2}\sigma^2)dt+\sigma dz_t
\end{aligned}
$$
å¯¹ä¸Šå¼å·¦å³ä¸¤è¾¹åŒæ—¶æ±‚ç§¯åˆ†å¯å¾—
$$
\int_{t=0}^T{d(\ln S_t)}=\int_{t=0}^T{(\mu -\frac{1}{2}\sigma^2)dt}+\sigma \int_{t=0}^T {dz_t}\
\ln S_T - \ln S_0 = (\mu- \frac{1}{2} \sigma^2)T + \sigma \int_{t=0}^T {dz_t}\
S_T = S_0e^{(\mu- \frac{1}{2} \sigma^2)T + \sigma \int_{t=0}^T {dz_t}}
$$
å…¶ä¸­$(\mu- \frac{1}{2} \sigma^2)T + \sigma \int_{t=0}^T {dz_t}$æ˜¯ä¸€ä¸ªæ­£æ€åˆ†å¸ƒçš„éšæœºå˜é‡ï¼Œå‡å€¼ä¸º$(\mu- \frac{1}{2} \sigma^2)T$ï¼Œæ–¹å·®ä¸º$\sigma^2T$ï¼Œæ ¹æ®å¯¹æ•°æ­£æ€åˆ†å¸ƒçš„æ€§è´¨æœ‰ï¼Œ
$$
E(S_T)= S_0 e^{\mu T}
$$
è¿™é‡Œçš„è‚¡ç¥¨ä»·æ ¼å¹¶ä¸ç¬¦åˆé…æ€§ï¼Œå³$E(S_T) \neq S_0 e^{rT}$ã€‚è¿™æ˜¯åœ¨çœŸå®ä¸–ç•Œçš„æ¦‚ç‡æµ‹åº¦ä¸‹æ±‚å–çš„æœŸæœ›ï¼Œè‡ªç„¶ä¸å­˜åœ¨é…æ€§çš„ç»“è®ºã€‚ä¸è¿‡æˆ‘ä»¬çŸ¥é“ï¼Œå½“å¸‚åœºä¸­ä¸å­˜åœ¨å¥—åˆ©æœºä¼šæ—¶ï¼Œä¸€å®šå­˜åœ¨ä¸€ä¸ªç­‰ä»·é…æµ‹åº¦ï¼Œè‚¡ç¥¨ä»·æ ¼åœ¨è¿™ä¸ªæµ‹åº¦ä¸‹ç¬¦åˆé…æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ$\widetilde{E}(S_T)=S_0e^{rT}$ï¼Œåœ¨ç­‰ä»·é…æµ‹åº¦ä¸‹ï¼Œè‚¡ç¥¨ä»·æ ¼åº”è¯¥æ»¡è¶³ï¼š</p>
<p>$$
S_T = S_0e^{(\mu- \frac{1}{2} \sigma^2)T + \sigma \int_{t=0}^T {d\widetilde{z}_t}}
$$</p>
<p>Tæ—¶åˆ»ï¼Œè¡Œæƒä»·ä¸ºKçš„æ¬§å¼ä¹°å…¥æœŸæƒåœ¨0æ—¶åˆ»çš„ä»·æ ¼åœ¨ç­‰ä»·é…æµ‹åº¦ä¸‹ï¼Œæœ‰
$$
C_0=e^{-rT} \widetilde{E} \lbrace max \lbrace S_T-K, 0 \rbrace \rbrace
$$
$\ln S_T$æ˜¯ä¸€ä¸ªæ­£æ€åˆ†å¸ƒçš„éšæœºå˜é‡
$$
\ln S_T \backsim [\ln S_0 +(r-\frac{1}{2}\sigma^2)T, \sigma^2 T ]
$$
å°†$lnS_T$ å†™æˆ
$$
\ln S_T = a+ b\mu
$$
å…¶ä¸­$\mu \backsim \phi (0,1)$ï¼Œè€Œa, bä¸¤ä¸ªå‚æ•°åˆ†åˆ«ä¸º
$$
a= \ln S_0 +(r-\frac{1}{2}\sigma^2)T\
b= \sigma \sqrt{T}
$$
ä»¤
$$
e^{a+bU}=K
$$
å¯ä»¥è§£å‡º
$$
U=\frac{\ln K -a}{b}=\frac{\ln K-\ln S_0 +(r-\frac{1}{2}\sigma^2)T}{\sigma \sqrt{T}}
$$
è®¡ç®—æœŸæœ›
$$
\begin{aligned}
\widetilde{E} \lbrace max \lbrace S_T-K, 0 \rbrace \rbrace &amp;= \int_{U}^{+\infty} {(e^{a+b\mu}-K)\frac{1}{\sqrt {2\pi}}e^{-\frac{1}{2}\mu^2}du }\
&amp;=\frac{1}{\sqrt {2\pi}}\exp [-\frac{1}{2}(u-b)^2+a+\frac{1}{2}b^2]du-K \int_{U}^{+\infty} {\frac{1}{\sqrt {2\pi}}e^{-\frac{\mu^2}{2}}du}\
&amp;=e^{a+\frac{1}{2}b^2} \int_{U-b}^{+\infty}{\frac{1}{\sqrt{2\pi}}\exp[-\frac{1}{2} (u-b)^2]}d(u-b)-KN[-U]\
&amp;=e^{a+\frac{1}{2}b^2}[1-N(U-b)]-KN[1-N(U)]\
&amp;=e^{rT}S_0N(b-U)-KN(-U)
\end{aligned}
$$
å…¶ä¸­$a+\frac{1}{2}b^2=\ln S_0+rT$
å°±æœ‰
$$
C_0 = e^{-rT} \widetilde{E} \lbrace max \lbrace S_T-K,0 \rbrace \rbrace =S_0 N(b-U)-e^{-rT}KN(-U)
$$
å¦‚æœå®šä¹‰
$$
d_1 = b-U=\sigma \sqrt{T}- \frac{\ln K -a}{b}=\frac{\ln K-\ln S_0 +(r-\frac{1}{2}\sigma^2)T}{\sigma \sqrt{T}} = \frac{\ln \frac{S_0}{K}+ï¼ˆr+\frac{1}{2}\sigma^2)T}{\sigma \sqrt {T}}\
d_2 = -U = d_1-b = d_1-\sigma \sqrt {T}
$$
åˆ™æœ‰
$$
C_0 = S_0N(d_1)-e^{-rT}KN(d_2)
$$</p>
</li>
</ul>
]]></description>
</item>
<item>
    <title>Python Code Tips</title>
    <link>https://dh-zheng.github.io/Notes.github.io/posts/code/python/</link>
    <pubDate>Mon, 01 Jan 0001 00:00:00 &#43;0000</pubDate>
    <author>ZHengDH</author>
    <guid>https://dh-zheng.github.io/Notes.github.io/posts/code/python/</guid>
    <description><![CDATA[<h1 id="pandas"><strong>&gt;pandas</strong></h1>
<pre tabindex="0"><code>    df.sub(a, axis=0)   # æŒ‰è¡Œå‡å»aè¿™ä¸€è¡Œ
    df.drop(a, axis=0)  # åˆ é™¤aè¿™ä¸€åˆ—
    df.dropna()         # åˆ é™¤ç©ºå€¼
    df.cov(ddof=n)      # æ±‚è‡ªç”±åº¦ä¸ºnçš„åæ–¹å·®
    df.sort_values(by=aattribute)   # æŒ‰ç…§æŸä¸ªå±æ€§çš„å€¼æ’åº
    df.set_index()      # è®¾ç½®ç´¢å¼•ï¼Œå¯double sorting
    df.isin(values)     # values:iterable, setries, Dataframe or dict
    df.swaplevel()      # äº¤æ¢åŒé‡indexçš„ä½ç½®
    df.reset_index()    # é‡ç½®index, indexä½œä¸ºdataå‚¨å­˜
    df.fillna(num)      # ç”¨numè¡¥å……æ‰€æœ‰çš„nan
    df.cumprod()        # æ¯ä¸ªä½ç½®çš„valueæœ‰å‰é¢æ‰€æœ‰baluesç´¯ä¹˜
    df.cumsum()         # ç´¯åŠ 
    df.drop_duplicates()    # åˆ é™¤é‡å¤å€¼        
    df.astype()         # æ•´å¼ è¡¨ä¿®æ”¹æ•°æ®æ ¼å¼         

    pd.isnull(df).sum() # ç©ºå€¼ç»Ÿè®¡

    pd.merge(df1, df2, on= )    # ç›¸åŒç´¢å¼•ä¼šå½’åœ¨åŒä¸€è¡Œï¼ŒæŒ‰åˆ—æ‹¼æ¥
    pd.concat([df1, df2], axis=0)   # æ¨ªå‘æ‹¼æ¥

    pd.DatetimeIndex(Growth_Rate.index.get_level_values(1)).year==Year   # åŒé‡indexå†…ç´¢å¼•ä¸ºæ—¶é—´ï¼Œå–å‡ºæŸä¸€å¹´çš„æ•°æ®
</code></pre><h1 id="numpy"><strong>&gt;numpy</strong></h1>
<pre tabindex="0"><code>    np.ones(n)              # ä¸€ç»´
    np.ones((n,m))          # äºŒç»´
    np.zeros()
    np.ones()
    np.linalg.inv()         # æ±‚é€†çŸ©é˜µ
    np.dot(data1, data2)    # çŸ©é˜µç›¸ä¹˜
    df1.dot(df2)
    np.split(data, [å¤šä¸ªæ‹†åˆ†ä½ç½®])   # æ‹†åˆ†æ•°æ®
    np.array_split(data, n)         # å°†æ•°æ®å¹³åˆ†æˆä¸ºnåˆ—
    np.maximum.accumulate(data)
    np.maximum.accumulate(date)     # è®¡ç®—æ•°ç»„ï¼ˆæˆ–dataframeç‰¹å®šè½´ï¼‰çš„ç´¯ç§¯æœ€å¤§å€¼ï¼ˆç”¨äºæœ€å¤§å›æ’¤ï¼‰
    np.unique(data)         # æ‰¾å‡ºä¸é‡å¤çš„å€¼
    np.argmax(data)         # è¿”å›ä¸€ä¸ªnumpyæ•°ç»„ä¸­æœ€å¤§å€¼çš„ç´¢å¼•å€¼ï¼Œå¤šä¸ªæ˜¯è¿”å›ç¬¬ä¸€ä¸ª
    np.sign(data)           # å–æ•°å­—ç¬¦å·ï¼ˆæ­£è´Ÿå·ï¼‰çš„å‡½æ•°ï¼ˆ-1ï¼Œ0ï¼Œ1ï¼‰
    np.clip(data, a, b)     # å‰ªæï¼Œæ•°æ®èŒƒå›´é™åˆ¶åœ¨[a,b]ä¹‹é—´
    np.quantile(data, quantile)     # å–å‡ºdataçš„quantileçš„å€¼
    np.vstack((array1, array2))     # çºµå‘å †å æ•°æ®
    np.hstack((array1, array2))     # æ°´å¹³å †å æ•°æ®

    array.tolist()          # arrayè½¬ä¸ºlist
    array.cumsum()          # ç´¯åŠ ï¼Œå¯ç”¨äºå¤šç»´æ•°ç»„
</code></pre><h1 id="ç»Ÿè®¡æ–¹æ³•"><strong>&gt;ç»Ÿè®¡æ–¹æ³•</strong></h1>
<h2 id="å›å½’">å›å½’</h2>
<pre tabindex="0"><code>    y = 
    x =
    x = sm.add_constant(x)
    model = sm.OLS(y,x)
    result = model.fit()

    p = scipy.stats.f.sf(n:æ ‡çš„æ•°é‡ï¼Œ m-n-1:è‡ªç”±åº¦)
    ststs.ttest_1samp(data,values)  # t_test:dataå¯ä»¥æ˜¯å¤šåˆ—ï¼ŒåŒæ—¶valuesè¦ä¸ºå¯¹åº”æ•°é‡çš„å€¼ï¼Œæ¯”å¦‚æ£€éªŒ25åˆ—æ•°æ®æ˜¯å¦æ˜¾è‘—ä¸ä¸º0ï¼Œvaluesåº”è¯¥ä¸º25ä¸ª0çš„list
</code></pre><h2 id="æ•°æ®åˆ†æ">æ•°æ®åˆ†æ</h2>
<pre tabindex="0"><code>    from pandas_profiling import ProfileReport
    report = ProfileReport(Info_needed, minimal = True)
    print(report.to_notebook_iframe())
</code></pre><h1 id="æ•°æ®ä¿å­˜"><strong>&gt;æ•°æ®ä¿å­˜</strong></h1>
<h2 id="ä¿å­˜åˆ°excel">ä¿å­˜åˆ°excel</h2>
<pre tabindex="0"><code>    savelocal = 
    writer = pd.ExcelWriter(savelocal)
    df.to_excel(writer, sheet_name=&#39;&#39;)

    writer.save()
    writer.close()
</code></pre><h1 id="å¤šè¿›ç¨‹"><strong>&gt;å¤šè¿›ç¨‹</strong></h1>
<pre tabindex="0"><code>    p = mp.Pool(n):     # n:å¤šè¿›ç¨‹æ•°é‡
    result = []
    result.append(p.apply_async(function, args=()))
    
    for i in resultï¼š
    print(b.get())      # å¤šè¿›ç¨‹debugè¾“å‡º

    p.close()
    p.join()
</code></pre><h1 id="leetcode"><strong>&gt;Leetcode</strong></h1>
<pre tabindex="0"><code>    enumerate(x)         # ç»™xä¸­çš„å…ƒç´ è´´ä¸Šåºå·ï¼Œå¹¶è¿”å›åºå·ä¸å…ƒç´ å€¼
    dict().get()         # æ ¹æ®indexå–å‡ºå€¼
</code></pre><h1 id="git"><strong>Git</strong></h1>
<pre tabindex="0"><code>    git init             # åˆ›å»ºæ ‡å‡†ä»“åº“
    git config --list    # æ˜¾ç¤ºå½“å‰gité…ç½®ä¿¡æ¯
    git config --system --list     # æ˜¾ç¤ºç³»ç»Ÿçº§åˆ«gité…ç½®ä¿¡æ¯
    git config --global user.name &#34;ç”¨æˆ·å&#34;  # ç”¨æˆ·çº§åˆ«è®¾ç½®ç”¨æˆ·å
    git congig --global user.email &#34;ç”¨æˆ·é‚®ç®±&#34;   # ç”¨æˆ·çº§åˆ«è®¾ç½®é‚®ç®±
    git clone &lt;url&gt;      # å…‹éš†è¿œç¨‹ä»“åº“åˆ°æœ¬åœ°
    git add *            # æ·»åŠ æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº
    git commit -m &#34;æè¿°&#34;    # å°†æš‚å­˜åŒºçš„ä»£ç æ·»åŠ åˆ°æœ¬åœ°ä»“åº“
    git status           # æŸ¥çœ‹ä»“åº“æ–‡ä»¶çš„çŠ¶æ€
    git status -s        # æŸ¥çœ‹ç®€ç•¥ç‰ˆä¿¡æ¯
    git push -u origin main # å°†è¿œç¨‹ä»£ç æ¨é€åˆ°æœ¬åœ°
    git pull             # å°†è¿œç¨‹ä»£ç æ‹‰å–åˆ°æœ¬åœ°
</code></pre>]]></description>
</item>
<item>
    <title>Quantitative Investment analysis</title>
    <link>https://dh-zheng.github.io/Notes.github.io/posts/courses/quantitative-investment-analysis/</link>
    <pubDate>Mon, 01 Jan 0001 00:00:00 &#43;0000</pubDate>
    <author>ZHengDH</author>
    <guid>https://dh-zheng.github.io/Notes.github.io/posts/courses/quantitative-investment-analysis/</guid>
    <description><![CDATA[<h1 id="lec1-mean-variance-portfolio-choice">Lec1 Mean-variance portfolio choice</h1>
<h2 id="basic-concepts-of-portfolios">Basic concepts of portfolios</h2>
<ul>
<li>
<p>Gross return 
$$
R = Gross \enspace return = \frac{amount \enspace recevied}{amount \enspace invested}
$$</p>
</li>
<li>
<p>Rate of return
$$
r = Rate \enspace of \enspace return = \frac{amount \enspace recevied - amount \enspace invested}{amount \enspace invested} = R-1
$$</p>
</li>
<li>
<p>Amount recevied = net dividend and repurchase received during the investment + terminal asset payoffs</p>
</li>
<li>
<p>Short sales
You receive X~0~ initially and pay X~1~ + D later, so your initial cost is -X~0~ and the final payoff is -X~1~ - D, and hence your gross return is given by,
$$
R = \frac{amount \enspace received}{amount \enspace invested} = \frac{-X_1 - D}{-X_0} = \frac{X_1 + D}{X_0} = r+1
$$</p>
</li>
<li>
<p>Random payoffs(r)
In real word, both intermediate cash flows and terminal payoffs are uncertain.</p>
<p>!!!note â€‚ r: discrete random variable <!-- raw HTML omitted --> â€‚ n: corresponding probabilities {p~1~, &hellip;, p~n~}, where $\sum _i p_i = 1$ and 0 $\leqslant$ p~i~ $\leqslant$ 1</p>
<p>mean = $\overline{r}$ = $\sum\limits_{n=1}^{n} r_i p_i$
variance = $\sigma^2_r$ = $\sum\limits_{n=1}^{n} (r_i - \overline{r})^2 p_i$
standard deviation = $\sigma_r$ = $\sqrt{\sum\limits_{i=1}^{n} (r_i - \overline{r})^2 p_i}$</p>
</li>
<li>
<p>Continuous payoffs</p>
<p>!!!note return can be any value in ($-\infty, \infty$) (or (0, $\infty$))</p>
<p>Cumulative Distribution Function (CDF) of r:
$$
F(x) = Pr(r\leqslant x)
$$</p>
<p>Probability density function (pdf) of r:
$$
f(x) = \lim_{\Delta \to 0} \frac{Prob(x &lt; r \leqslant x+\Delta)}{\Delta} = \lim_{\Delta \to 0} \frac{F(x+\Delta)-F(x)}{\Delta} = \frac{\partial F(t)}{\partial t}|_{t=x}
$$</p>
<p>Expectation of r:
$$
E[r] = \int^x_{-\infty} t f(t) dt
$$</p>
<p>Variance of r:
$$
Var[r] = E[(r-E[r])^2] = \int_{-\infty}^{\infty} (t-E[r])^2 f(t)dt
$$</p>
</li>
<li>
<p>Covarience
For two discrete random variable r and m, their mutual linear dependence can be characterized by their covariance.</p>
<p>$$
Cov(r, m) = E[(r-E[r])(m-E[m])] = E[rm] - E[r]E[m]
Symmetry: Cov(r, m) = Cov(m, r)
$$</p>
<p>If r and u are both discrete rv,
$$
Cov(r,m)=\sum\limits_{i=1}^{n} \sum\limits_{j=1}^{n} {(r_i - \overline{r})(u_j - \overline{u})p_{ij}}
$$
where,
$$
p_{ij} = Prob(r=r_i \&amp; u=u_j)
$$</p>
<p>If r and u are both Continuous rv, we have
$$
Cov(r,u) = \int_{-\infty}^{\infty} \int_{-\infty}^{\infty} (x-E[r])(y-E[m])f(x,y)dxdy
$$</p>
<p>where f is the joint probility density function of (r,m).</p>
</li>
<li>
<p>Correlation
Cov(r~1~, r~2~) = 0, they are said to be uncorrelated and independent.
$$
E[r_1, r_2] = \overline{r_1} \enspace \overline{r_2} \longrightarrow Cov(r_1, r_2)
$$</p>
<p>The correlation coefficient of a pair of random variavles:
$$
\rho_{r_1, r_2} = \frac{Cov(r_1, r_2)}{\sigma_{r_1} \sigma_{r_2}}
$$
$$
|\rho_{r_1, r_2}| \leqslant 1 \longrightarrow |Cov(r_1, r_2)| \leqslant \sigma_{r_1} \sigma_{r_2}
$$</p>
</li>
<li>
<p>Portfolio
Weight:</p>
<p>!!! note â€‚ Initial wealth W~0~ <!-- raw HTML omitted --> â€‚ W~0i~ in each asset <!-- raw HTML omitted --> â€‚ total $\sum_i W_{0i} = W_0$, W~0i~ can be negative</p>
<p>Define:
$$
\sum\limits_{i} w_i = 1
$$
In matrix form, $e^{&rsquo;}w =1 $, where e i a n $\times$ 1 column vector of 1.</p>
<p>$e^{&rsquo;}w =0 $: 0æˆæœ¬ç»„åˆï¼Œlong-shortç»„åˆ</p>
<p>Portfolio return:</p>
<p>!!!note â€‚ R~i~ : the gross return of asset i <!-- raw HTML omitted --> â€‚ $R_i W_{0i} = R_{i \omega_i}W_0$</p>
<p>Gross return of the portfolio is:
$$
R_p = \frac{amount \enspace received}{amount \enspace invested} = \frac{\sum_i R_{i \omega_i}W_0}{W_0} = \sum\limits_{i} \omega_i R_i = \omega^{&rsquo;}R
$$
Rate of return r is:
$$
r_p = R_p -1 = \sum\limits_{i} \omega_i R_i -1 = \sum\limits_{i} \omega_i (R_i -1) = \sum\limits_{i} \omega_i r_i = \omega^{&rsquo;}r
$$</p>
</li>
<li>
<p>Excess Return and Long-short Portfolio</p>
<p>!!! note â€‚ $R_p = \omega_p^{&rsquo;} R$ <!-- raw HTML omitted --> â€‚ $R_q = \omega_q^{&rsquo;} = R$ <!-- raw HTML omitted --> â€‚ R~f~ : Risk-free return</p>
<p>Portfolio p return in excess of risk-free rate: $R_p - R_f = \omega_p^{&rsquo;}R - \omega_p^{&rsquo;}(R_f e)$
Portfolio p return excess in excess of q: $R_p - R_q = \omega_p^{&rsquo;} R - \omega_q^{&rsquo;}R$
W~p~ - W~q~ =0 $\longrightarrow$ zero cost stratry</p>
<p>Denote:
$$
\overline{r} =  \left (\begin{array}{cc} \overline{r_1} \ \overline{r_2} \ . \ . \ \overline{r_n} \end{array} \right)
$$
The expected rate of return of the portfolio:
$$
E[r_p] = E[\sum\limits_{i} w_i r_i] = \sum\limits_{i} w_i E[r_i] = \sum\limits_{i} w_i \overline{r_i} = \omega^{&rsquo;}\overline{r}
$$
The variance of the portfolio $\sigma_p^2$:
$$
\begin{aligned}
\sigma_p^2 &amp;= E[(r_p - \overline{r_p})^2]\
&amp;= E[(\sum\limits_{i} \omega_i r_i - \sum\limits_{i} \omega_i \overline{r_i})^2]\
&amp;= E[(\omega^{&rsquo;}r - \omega^{&rsquo;}\overline{r})(\omega^{&rsquo;}r - \omega^{&rsquo;} \overline{r})]\
&amp;= E[\omega^{&rsquo;}(r-\overline{r})(r-\overline{r})^{&rsquo;} \omega]\
&amp;= \omega^{&rsquo;}E[(r-\overline{r})(r-\overline{r})^{&rsquo;}]\omega \enspace(\omega, a constant vevtor, canbe taken out) \
&amp;= \omega^{&rsquo;} V \omega, \enspace where \enspace V_{i,j} = \sigma_{ij} 
\end{aligned}
$$</p>
</li>
<li>
<p>OLS Estimator for Linear Regression</p>
<p>!!! note â€‚ Formula: $Y=X \beta + \epsilon$ <!-- raw HTML omitted --> â€‚ OLS estimator: $\hat{\beta}<em>{OLS} = \mathop{\arg\min}</em>{\beta} (Y-X \beta)^{&rsquo;} (Y-X \beta)$</p>
<p>$$
Y = \left(
\begin{matrix}
y_1 \
y_2 \
. \
. \
y_n \
\end{matrix}
\right) +
\left(
\begin{matrix}
1 &amp; E_{du_1} &amp; E_{xp_1} &amp; I_{Q_1} \
1 &amp; E_{du_2} &amp; E_{xp_2} &amp; I_{Q_2} \
. &amp; . &amp; . &amp; . \
. &amp; . &amp; . &amp; . \
1 &amp; E_{du_n} &amp; E_{xp_n} &amp; I_{Q_n} \
\end{matrix}
\right) +
\left(
\begin{matrix}
\epsilon_1 \
\epsilon_2 \
. \
. \
\epsilon_n \
\end{matrix}
\right)
$$</p>
<p>$$
\min \limits_{\beta} \epsilon^T \epsilon = \sum \epsilon_i^2 = f(\beta) \
\downarrow \
\frac{\partial f(\beta)}{\partial \beta} = 0
$$
Because:
$$
\begin{aligned}
(Y-X \beta)^T (Y-X \beta) &amp;= (Y^T - \beta^T X^T)(Y - X \beta)\
&amp;= Y^T - 2Y^T X\beta + \beta^T X^T X \beta
\end{aligned}
$$
So:
$$
\frac{\partial f(\beta)}{\partial \beta} = 0 \
\downarrow \
0 - 2X^TY + \beta X^T X \hat{\beta} = 0 \Longrightarrow \hat{\beta} = (X^T X)^{-1} X^T Y 
$$</p>
</li>
<li>
<p>Diversification</p>
<p>!!! note â€‚ If the rate of returns on individual assets are correlated
$$
\begin{aligned}
Var(\tilde{r}<em>p) = \sigma_p^2 &amp;= \sum\limits</em>{i} \sum\limits_{j} \frac{1}{n^2} \sigma_{ij} \
&amp;= \frac{1}{n^2} { \sum\limits_{i=1}^{n} \sigma_i^2 + \sum\limits_{i\neg j} \sigma_{ij} } \
&amp;= \frac{1}{n^2} { n\sigma_{Avg}^2 + (n^2 - n)\sigma_{ij}^{Avg}  } \
&amp;= \frac{1}{n} \underbrace{{ \sigma_{Avg}^2 - \sigma_{ij}^{Avg} } }<em>{if \enspace bounded} + \sigma</em>{ij}^{Avg} \longrightarrow \sigma_{ij}^{Avg}
\end{aligned}
$$</p>
<p>!!!note â€‚ The variance of a portfolio with a large number of individual assets is mainly determined by the covariance of the individual assets.</p>
<p>A rational risk-averse investor likes return and dislike risk. She should choose a portfolio of assets that efficiently balance expected returns and risks.</p>
</li>
</ul>
<h2 id="minimal-variance-analysis">Minimal-variance analysis</h2>
<h3 id="two-risky-assets">Two risky assets</h3>
<p>!!! note â€‚ Let $\overline{R}_A &lt; \overline{R}_B$ and $\sigma_A^2 &lt; \sigma_B^2$ <!-- raw HTML omitted --> â€‚ Form a portfolio p with a proportion $\omega \enspace (1-\omega)$ invested in asset A(B)
The expected return and standard deviation of the portfolio:
$$
\overline{R}_p = \omega \overline{R}_A + (1-\omega)\overline{R}_B = \overline{R}_B - \omega (\overline{R}_B - \overline{R}_A)\
\sigma_p = [\omega^2 \sigma_A^2 + 2\rho \omega (1-\omega)\sigma_A \sigma_B + (1-\omega)^2 \sigma_B^2]^\frac{1}{2}
$$
consider an extreme case $\rho=1, \Longrightarrow =|\omega \sigma_A +(1-\omega_B)|$
We can solve for:
$$
\omega = \frac{\sigma_B \pm \sigma_p}{\sigma_B - \sigma_A} \
\begin{aligned}
\overline{R}_p = \overline{R}_B + \omega &amp;= \frac{\sigma_B \pm \sigma_p}{\sigma_B - \sigma_A} (\overline{R}_B-\overline{R}_A) \
&amp;= \frac{\sigma_B \overline{R}_A-\sigma_A \overline{R}_B}{\sigma_B - \sigma_A} \pm \frac{\overline{R}_B - \overline{R}_A}{\sigma_B - \sigma_A}\sigma_p
\end{aligned}
$$</p>
<!-- raw HTML omitted -->
<h3 id="multiple-risky-assets">Multiple risky assets</h3>
<p>!!! note â€‚ V is invertible (no redundant assets)
The Markowitz&rsquo;s mean-variance portfolio proble:
$$
\min_{\omega} \frac{1}{2} \omega^{&rsquo;}V \omega \
st. e^{&rsquo;} \omega = 1\
\omega^{&rsquo;} \overline{R} = \overline{R}_p
$$</p>
<p>Form the Lagrangian:
$$
\min_{\omega, \lambda, \gamma} L = \underbrace{\frac{1}{2} \omega^{&rsquo;}V \omega }<em>{\frac{1}{2}å­˜åœ¨ä¸å¦éƒ½å¯ä»¥} + \lambda (\overline{R}<em>p - \omega^{&rsquo;} \overline{R}) + \gamma(1-\omega^{&rsquo;}e)
$$
FOC w.r.t. $\omega$ and two Lagrange multipliers,
$ V \omega - \lambda \overline{R} - \gamma e = 0, \Longrightarrow$
$$
\omega^{*} = \underbrace{\lambda}</em>{æƒé‡1} V^{-1} \overline{R} + \underbrace{\gamma}</em>{æƒé‡2} V^{-1} e
$$</p>
<p>!!! note â€‚ Two fund separation theorem: the MVF is a linear combination of two canonic portfolios: $V^{-1}\overline{R}$ and $V^{-1}e$. An inverstor&rsquo;s risk preference (related to $\lambda$ and $\gamma$) determines the weights on these two funds.</p>
<p>Solve the Largange multipliers(å¸¦å…¥$\omega^{<em>}$):
$$
\begin{equation}
\begin{aligned}
\overline{R}_p &amp;= \overline{R^{&rsquo;}} \omega^{</em>} = \lambda \overline{R^{&rsquo;}}V^{-1} \overline{R} + \gamma \overline{R^{&rsquo;}} V^{-1}e \
1 &amp;= e^{&rsquo;} \omega = \lambda e^{&rsquo;}V^{-1} \overline{R} + \gamma e^{&rsquo;}V^{-1} e \tag{9}
\end{aligned}
\end{equation}
$$</p>
<h3 id="portfolio-math">Portfolio math</h3>
<p>Write the preceding linear equations (9) in a matrix form:
$$
\left(
\begin{matrix}
\overline{R^{&rsquo;}}V^{-1} \overline{R} &amp; \overline{R^{&rsquo;}}V^{-1}e \
\overline{R^{&rsquo;}}V^{-1}e &amp; e^{-1}V^{-1}e 
\end{matrix}
\right)
\left(
\begin{matrix}
\lambda \
\gamma
\end{matrix}
\right) = 
\left(
\begin{matrix}
\overline{R}_p \
1
\end{matrix}
\right)
$$
Solve the two Lagrange multipliers:
$$
\lambda = \frac{\delta \overline{R}_p - \alpha}{\Delta} \enspace and \enspace \gamma = \frac{\xi - \alpha \overline{R}_p}{\Delta} \tag{10}
$$
Where $\alpha, \delta, \xi$ and $\Delta$ are functions of V and $\overline{R}_p$:
$$
\begin{equation}
\begin{aligned}
\delta \equiv e^{&rsquo;} V ^{-1} e &gt; 0, \
\alpha \equiv \overline{R}^{&rsquo;} V^{-1}e, \
\xi = \overline{R}^{&rsquo;}V^{-1}\overline{R} &gt; 0, \
\Delta = \delta \xi - \alpha^2 \tag{11}
\end{aligned}
\end{equation}
$$
The optimal portfolio weights $\omega^{<em>}$ :
$$
\begin{aligned}
\omega^{</em>} &amp;= \frac{\delta \overline{R}_p - \alpha}{\Delta} V^{-1} \overline{R} + \frac{\xi - \alpha \overline{R}_p}{\Delta} V^{-1}e \
&amp;= \alpha + b \overline{R}_p
\end{aligned}
$$</p>
<p>!!! â€‚ åªæœ‰åœ¨æœ‰æ•ˆå‰æ²¿ä¸Šçš„æŠ•èµ„ç»„åˆçš„æƒé‡æ‰å¯ä»¥ç”¨ä¸Šè¿°è¡¨è¾¾å¼
Where
$$
\alpha \equiv \frac{\xi V^{-1}e - \alpha V^{-1} \overline{R}}{\Delta} \enspace and \enspace b \equiv \frac{\delta V^{-1}\overline{R} - \alpha V^{-1}e}{\Delta}
$$</p>
<p>!!! â€‚ $\alpha$ and b are fixted vectors, given the investment opportunity set($\overline{R}, V$)</p>
<p>The variance of frontier portfolio with the expected return $\overline{R}<em>p$ :
$$
\sigma_p^2 = \omega^{&rsquo;<em>}V \omega^{</em>} = \omega^{&rsquo;*}(\lambda \overline{R}+\gamma e)=\lambda \overline{R}<em>p + \gamma
$$
Substituting the expression of $\lambda$ and $\gamma$:
We have
$$
\sigma_p^2 = \frac{1}{\delta}+ \frac{\delta(\overline{R}<em>p -\frac{\alpha}{\delta})^2}{\Delta} \tag{13}
$$
The global minimal variance portfolio (GMV): $\sigma</em>{mv}^2=\frac{1}{\delta}$ with $\overline{R}</em>{mv} = \frac{\alpha}{\delta}$.
$$
\omega_mv = \alpha + b \overline{R}</em>{mv} = \frac{V^{-1}e}{\delta} = \frac{V^{-1}e}{e^{&rsquo;}V^{-1}e}
$$
$\frac{\partial \sigma_p^2}{\partial \overline{R}<em>p} |</em>{\overline{R}<em>{mv}}=0$ (cannot reduce variance by giving up higher expected returns!)
<!-- raw HTML omitted -->
Find the weight on the GMV portfolio in another way:
$$
\min</em>{\omega} \frac{1}{2} \omega^{&rsquo;}V\omega \
\enspace \
st. \enspace  e^{&rsquo;} \omega = 1
$$
FOC w.r.t $\omega$ and the Largrange multiplier, we have
$$
\omega = \gamma V^{-1} e = \frac{V^{-1}e}{e^{&rsquo;}V^{-1}e}
$$</p>
<h3 id="mvf-geometry">MVF geometry</h3>
<p>A parabola in ($\overline{R}_p, \sigma_p^2$)
$$
\sigma_p^2 = \frac{1}{\delta}+ \frac{\delta(\overline{R}_p -\frac{\alpha}{\delta})^2}{\Delta}
$$</p>
<!-- raw HTML omitted -->
<p>!!! â€‚ The global minimum ($\frac{\alpha}{\delta}, \frac{1}{\delta}$) in ($\overline{R}_p, \sigma_p^2$)</p>
<p>$$
\frac{\sigma_p^2}{\frac{1}{\delta}}-\frac{\overline{R}_p-\frac{\alpha}{\delta}}{\frac{\Delta}{\delta^2}}=1, \sigma_p &gt; 0
$$</p>
<!-- raw HTML omitted -->
<p>The asymptote: $\lim_{\sigma_p \rightarrow \infty}\frac{d  \overline{R}_p}{d \sigma_p}$</p>
<p>!!! note â€‚ Definition: The frontier portfolios with expected return higher(lower) than $\overline{R}_{mv}=\frac{\alpha}{\delta} $ are called efficient(inefficient) frontier portfolios.</p>
<h3 id="two-fund-theorem">Two Fund Theorem</h3>
]]></description>
</item>
<item>
    <title>åŸºäºæ‹¥æŒ¤åº¦åˆ¤æ–­çš„è¡Œä¸šè½®åŠ¨ç­–ç•¥</title>
    <link>https://dh-zheng.github.io/Notes.github.io/posts/research-report/%E8%A1%8C%E4%B8%9A%E8%BD%AE%E5%8A%A8/</link>
    <pubDate>Mon, 01 Jan 0001 00:00:00 &#43;0000</pubDate>
    <author>ZHengDH</author>
    <guid>https://dh-zheng.github.io/Notes.github.io/posts/research-report/%E8%A1%8C%E4%B8%9A%E8%BD%AE%E5%8A%A8/</guid>
    <description><![CDATA[<h2 id="åŸºäºæ‹¥æŒ¤åº¦åˆ¤æ–­çš„è¡Œä¸šè½®åŠ¨ç­–ç•¥">åŸºäºæ‹¥æŒ¤åº¦åˆ¤æ–­çš„è¡Œä¸šè½®åŠ¨ç­–ç•¥</h2>
<ul>
<li>æ¥æºï¼šåŸºäºæ‹¥æŒ¤åº¦åˆ¤æ–­çš„è¡Œä¸šè½®åŠ¨ç­–ç•¥â€”â€”ä¿¡è¾¾è¯åˆ¸</li>
</ul>
<h3 id="è¡Œä¸šè½®åŠ¨ç­–ç•¥åŠ¨é‡ç­–ç•¥">è¡Œä¸šè½®åŠ¨ç­–ç•¥ï¼ˆåŠ¨é‡ç­–ç•¥ï¼‰</h3>
<ul>
<li>
<p>å¹´åº¦åŠ¨é‡æ•ˆåº”åœ¨è¡Œä¸šå±‚é¢å¯èƒ½æœ‰æ•ˆï¼Œæ•æ‰åŠ¨é‡æ•ˆåº”å’Œè§„é¿åŠ¨é‡å´©æºƒæ˜¯å†³å®šåŠ¨é‡ç­–ç•¥è¡¨ç°çš„å…³é”®å› ç´ </p>
</li>
<li>
<p>å®šä¹‰å„è¡Œä¸šçš„åŠ¨é‡å› å­ä¸ºè¿‡å»ä¸€æ®µæ—¶é—´çš„è¡Œä¸šç´¯è®¡æ”¶ç›Šç‡ï¼Œæœ‰ï¼š
$$
F_{i,t} = \frac{ClosePrice_{i,t}}{ClosePrice_{i,t-win_len+1}}-1
$$</p>
</li>
<li>
<p>$F_{i,t}$ä¸ºç¬¬ğ‘–ä¸ªè¡Œä¸šåœ¨ğ‘¡æ—¶åˆ»çš„åŠ¨é‡å› å­</p>
</li>
<li>
<p>ğ‘– = 1,2, â‹¯ , ğ‘;  ğ‘¡ = ğ‘¤ğ‘–ğ‘›_ğ‘™ğ‘’ğ‘›, â‹¯ , ğ‘‡ï¼›</p>
</li>
<li>
<p>ğ‘ä¸ºæˆªé¢è¡Œä¸šä¸ªæ•°ï¼›ğ‘‡ä¸ºå›æµ‹æ—¶æ®µæ€»å¤©æ•°ï¼›</p>
</li>
<li>
<p>$ğ¶ğ‘™ğ‘œğ‘ ğ‘’ğ‘ƒğ‘Ÿğ‘–ğ‘ğ‘’_ğ‘–$,ğ‘¡ä¸ºç¬¬ğ‘–ä¸ªè¡Œä¸šåœ¨ğ‘¡æ—¶åˆ»çš„æ”¶ç›˜ä»·</p>
</li>
<li>
<p>ğ‘¤ğ‘–ğ‘›_ğ‘™ğ‘’ğ‘›ä¸ºè®¡ç®—ç´¯è®¡æ”¶ç›Šç‡æ—¶ä½¿ç”¨çš„å›çœ‹çª—å£çš„å¤©æ•°</p>
<p><strong>å›çœ‹çª—å£ï¼ˆğ’˜ğ’Šğ’_ğ’ğ’†ğ’ï¼‰æ˜¯åŠ¨é‡ç­–ç•¥çš„å…³é”®å‚æ•°</strong>
<strong>60äº¤æ˜“æ—¥ä¸ºçŸ­æœŸï¼›250äº¤æ˜“æ—¥ä¸ºé•¿æœŸ</strong></p>
</li>
<li>
<p>ä¸­æœŸåŠ¨é‡250ä¸ªäº¤æ˜“æ—¥ä¸ºæœ€ä¼˜</p>
</li>
<li>
<p>æ•°æ®ï¼š28ä¸ªä¸­ä¿¡ä¸€çº§è¡Œä¸šï¼ˆä¸å«ç»¼åˆã€ç»¼åˆé‡‘èï¼‰</p>
</li>
<li>
<p>ç­–ç•¥ï¼šè¿‡å»250ä¸ªäº¤æ˜“æ—¥ç´¯è®¡æ¶¨å¹…æœ€é«˜çš„6ä¸ªè¡Œä¸šä¸ºå¤šå¤´ç»„åˆï¼›è¿‡å»250ä¸ªäº¤æ˜“æ—¥ç´¯è®¡æ¶¨å¹…æœ€ä½çš„6ä¸ªè¡Œä¸šä¸ºç©ºå¤´ç»„åˆï¼›28ä¸ªè¡Œä¸šç­‰æƒç»„åˆä¸ºåŸºå‡†</p>
</li>
</ul>
<h3 id="å•è¡Œä¸šæ‹¥æŒ¤åº¦">å•è¡Œä¸šæ‹¥æŒ¤åº¦</h3>
<ul>
<li>
<p>è§„é¿ç›¸å¯¹æ‹¥æŒ¤çš„å¸‚åœºç¯å¢ƒå’Œè¡Œä¸šæ˜¯åŠ¨é‡ç­–ç•¥å›æ’¤æ§åˆ¶çš„é‡è¦æ–¹å‘å’Œæ‰‹æ®µ
<strong>æ„å»ºèµ„äº§é›†ä¸­åº¦ï¼ˆAsset Centralityï¼‰æŒ‡æ ‡æ¥æ•æ‰ä¸€ç»„ç›¸ä¼¼èµ„äº§çš„æ‹¥æŒ¤ç¨‹åº¦</strong></p>
</li>
<li>
<p>STEP1ï¼šä¸»æˆåˆ†åˆ†æã€‚å°†ğ‘ä¸ªè¡Œä¸šçš„æ”¶ç›Šç‡æ—¶é—´åºåˆ—å»ä¸­å¿ƒåŒ–ï¼ˆå»å¹³å‡å€¼ï¼‰ï¼Œè¿›è¡Œä¸»æˆåˆ†åˆ†æï¼Œå¾—åˆ°ğ‘ä¸ªç‰¹å¾å€¼å’Œğ‘ä¸ªç‰¹å¾å‘é‡ã€‚</p>
</li>
<li>
<p>STEP2ï¼šè®¡ç®—æ–¹å·®è´¡çŒ®ç‡ã€‚å°†ç‰¹å¾å€¼æŒ‰ç…§ä»å¤§åˆ°å°çš„é¡ºåºæ’åºï¼Œå°†å…¶å¯¹åº”çš„å‰ğ‘›ä¸ªç‰¹å¾å‘é‡åˆ†åˆ«ä½œä¸ºåˆ—å‘é‡ç»„æˆç‰¹å¾å‘é‡çŸ©é˜µï¼Œè®¡ç®—å‰ğ‘›ä¸ªç‰¹å¾å‘é‡çš„æ–¹å·®è´¡çŒ®ç‡ğ´ğ‘…ï¼ˆAbsorption Ratioï¼‰ã€‚
$$
AR = \frac{\sum\limits_{j=1}^{n} {\sigma^2_{Ej}}}{\sum\limits_{i=1}^{N} {\sigma^2_{Aj}}}
$$
N:æ¨ªæˆªé¢ä¸ªæ•°
n:é€‰å–çš„ç‰¹å¾å‘é‡æ•°
$\sigma^2_{Ej}$:ç¬¬jä¸ªç‰¹å¾å‘é‡æ–¹å·®
$\sigma^2_{Aj}$:ç¬¬iä¸ªè¡Œä¸šæ–¹å·®</p>
</li>
<li>
<p>åœ¨ğ‘›ä¸€å®šçš„æƒ…å†µä¸‹ï¼Œæ–¹å·®è´¡çŒ®ç‡ğ´ğ‘…è¶Šé«˜ï¼Œè¯´æ˜å„è¡Œä¸šèµ°åŠ¿çš„å…±åŒé©±åŠ¨å› ç´ å°±è¶Šå¼º</p>
</li>
<li>
<p>STEP3ï¼šè®¡ç®—å•ä¸ªè¡Œä¸šğ‘–çš„èµ„äº§é›†ä¸­åº¦ã€‚ä»¥å‰ğ‘›ä¸ªğ´ğ‘…ä¸ºåŠ æƒæ¯”ä¾‹ï¼Œè®¡ç®—ç¬¬ğ‘–ä¸ªè¡Œä¸šåˆ†åˆ«åœ¨ğ‘›ä¸ªç‰¹å¾å‘é‡æš´éœ²çš„ç»å¯¹å€¼åœ¨æ‰€æœ‰è¡Œä¸šä¸­çš„å æ¯”ã€‚è¡Œä¸šğ‘–çš„èµ„äº§é›†ä¸­åº¦æŒ‡æ ‡å³ä½œä¸ºè¡Œä¸šğ‘–çš„æ‹¥æŒ¤åº¦åº¦é‡æŒ‡æ ‡ï¼Œæœ‰:
$$
C_{i} = \frac{\sum\limits_{j=1}^{n} ({AR^j_i}*\frac{|EV^j_i|}{\sum\limits_{k=1}^{N} {|EV^j_k|}})}{\sum\limits_{j=1}^{n} {AR^j_i}}
$$
$C_{i}$:è¡Œä¸šğ‘–çš„èµ„äº§é›†ä¸­åº¦å¾—åˆ†;
$AR^j_i$:ç¬¬ğ‘—ä¸ªç‰¹å¾å‘é‡çš„æ–¹å·®è´¡çŒ®ç‡
$EV^j_i$:ç¬¬ğ‘–ä¸ªè¡Œä¸šåœ¨ç¬¬ğ‘—ä¸ªç‰¹å¾å‘é‡æš´éœ²çš„ç»å¯¹å€¼
n:ğ‘›ä¸ºæ–¹å·®è´¡çŒ®ç‡åˆ†å­ä¸­çš„ç‰¹å¾å‘é‡æ•°ï¼Œå–2</p>
</li>
<li>
<p>ç­–ç•¥</p>
<ol>
<li>å¤šå¤´ç»„åˆï¼šå–å‡º28 ä¸ªä¸­ä¿¡ä¸€çº§è¡Œä¸šï¼ˆä¸å«ç»¼åˆã€ç»¼åˆé‡‘èï¼‰ä¸­è¿‡å»250 ä¸ªäº¤æ˜“æ—¥ç´¯è®¡æ¶¨å¹…æœ€é«˜çš„6 ä¸ªè¡Œä¸šã€‚è‹¥6 ä¸ªè¡Œä¸šä¸­ä¸åŒ…å«å½“å‰æˆªé¢æœ€æ‹¥æŒ¤è¡Œä¸šï¼Œåˆ™ç­‰æƒä¹°å…¥è¯¥6 ä¸ªè¡Œä¸šï¼›å¦åˆ™å‰”é™¤æœ€æ‹¥æŒ¤è¡Œä¸šåé€’è¡¥æ¶¨å¹…é å‰çš„ç¬¬7 ä¸ªè¡Œä¸šã€‚</li>
<li>ç©ºå¤´ç»„åˆï¼šæ¯æ¬¡è°ƒä»“æ—¶ç­‰æƒä¹°å…¥28 ä¸ªä¸­ä¿¡ä¸€çº§è¡Œä¸šï¼ˆä¸å«ç»¼åˆã€ç»¼åˆé‡‘èï¼‰ä¸­ï¼Œè¿‡å»250 ä¸ªäº¤æ˜“æ—¥ç´¯è®¡æ¶¨å¹…æœ€ä½çš„6 ä¸ªè¡Œä¸šã€‚</li>
<li>ç­‰æƒç»„åˆï¼šæ¯æ¬¡è°ƒä»“æ—¶ç­‰æƒä¹°å…¥28 ä¸ªä¸­ä¿¡ä¸€çº§è¡Œä¸šï¼ˆä¸å«ç»¼åˆã€ç»¼åˆé‡‘èï¼‰ã€‚</li>
<li>å¤šå¤´è¶…é¢ï¼šå¤šå¤´ç»„åˆç›¸å¯¹ç­‰æƒç»„åˆçš„ç´¯è®¡è¶…é¢ã€‚</li>
</ol>
</li>
</ul>
<h3 id="å¸‚åœºæ‹¥æŒ¤åº¦">å¸‚åœºæ‹¥æŒ¤åº¦</h3>
<ul>
<li>
<p>å•è¡Œä¸šæ‹¥æŒ¤åº¦æŒ‡æ ‡å‰”é™¤æœ€æ‹¥æŒ¤è¡Œä¸šé™ä½äº†å¤šå¤´ç»„åˆçš„æŒä»“é£é™©</p>
</li>
<li>
<p>ä½¿ç”¨ä¸¤ä¸ªå› å­åº¦é‡æ•´ä¸ªå¸‚åœºçš„ä»·é‡æ‹¥æŒ¤ç¨‹åº¦ï¼šè¡Œä¸šæ‹¥æŒ¤åº¦åˆ†æ•£åº¦å› å­ğ‘†ğ·ğ¶å’Œæ¢æ‰‹ç‡ğ‘‡ğ‘¢ğ‘Ÿğ‘›ğ‘‚ğ‘£ğ‘’ğ‘Ÿ
<!-- raw HTML omitted --></p>
</li>
<li>
<p>è¡Œä¸šæ‹¥æŒ¤åº¦åˆ†æ•£åº¦å› å­ğ‘†ğ·ğ¶ï¼šå®šä¹‰ğ¶ğ‘–,ğ‘¡ä¸ºç¬¬ğ‘–ä¸ªè¡Œä¸šåœ¨æ—¶åˆ»ğ‘¡çš„èµ„äº§é›†ä¸­ğ‘šğ‘’ğ‘ğ‘›($ğ¶_ğ‘–$,ğ‘¡)ä¸ºğ‘¡æ—¶åˆ»æˆªé¢æ‰€æœ‰è¡Œä¸šèµ„äº§é›†ä¸­åº¦çš„å‡å€¼ï¼Œğ‘ä¸ºæˆªé¢è¡Œä¸šä¸ªæ•°ã€‚å½“æœŸè¡Œä¸šæ‹¥æŒ¤åº¦åˆ†æ•£åº¦å› å­$ğ‘†ğ·ğ¶_ğ‘¡$å®šä¹‰ä¸ºèµ„äº§é›†ä¸­åº¦$ğ¶_ğ‘–$,ğ‘¡æˆªé¢æ ‡å‡†å·®çš„ç›¸åæ•°ï¼Œæˆªé¢æ‰€æœ‰è¡Œä¸šçš„æ‹¥æŒ¤åº¦åˆ†åŒ–è¶Šå°ï¼Œè¯´æ˜å½“å‰å¸‚åœºè¶Šæ‹¥æŒ¤ã€‚<br>
$$
SDC_t = -\sqrt{\frac{1}{N-1}\sum\limits_{i=1}^{N} (C_i-mean(C_{i,t}))^2}
$$</p>
</li>
<li>
<p>æ¢æ‰‹ç‡å› å­ğ‘‡ğ‘¢ğ‘Ÿğ‘›ğ‘‚ğ‘£ğ‘’ğ‘Ÿï¼šä¸‡å¾—å…¨Aï¼ˆ881001ï¼‰æ¯æ—¥æ¢æ‰‹ç‡è¿‡å»60æ—¥çš„ç§»åŠ¨å¹³å‡å€¼
ä¸ºå°½é‡å›é¿å› å­åœ¨ä¸ªåˆ«æ—¶æ®µä¸å¹³ç¨³çš„å½±å“ï¼Œåˆ†åˆ«å¯¹ä¸¤ä¸ªå› å­å–è¿‡å»5 å¹´ï¼ˆ1250 ä¸ªäº¤æ˜“æ—¥ï¼‰çš„åˆ†ä½å€¼ã€‚</p>
</li>
</ul>
<p><strong>ä¸ºå…¼å®¹ğ‘†ğ·ğ¶å’Œğ‘‡ğ‘¢ğ‘Ÿğ‘›ğ‘‚ğ‘£ğ‘’ğ‘Ÿä¸¤ä¸ªå› å­çš„æœ‰æ•ˆæ€§è‹¥ä¸¤ä¸ªå› å­ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå› å­åˆ†ä½æ•°ä¸Šç©¿95%ï¼Œæ¨¡å‹å‘å‡ºåŠ¨é‡å¤±æ•ˆé¢„è­¦ä¿¡å·ï¼Œæ­¤æ—¶å¤šå¤´ç»„åˆæŒ‰ç­‰æƒç»„åˆçš„æ–¹å¼é…ç½®ï¼Œå¤šç©ºç»„åˆã€å¤šå¤´è¶…é¢æ”¶ç›Šç‡å‡ä¸º0</strong></p>
]]></description>
</item>
</channel>
</rss>
